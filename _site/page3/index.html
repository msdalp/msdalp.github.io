<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      msdalp &middot; java, android, etc.
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89611351-1', 'auto');
  ga('send', 'pageview');

</script>
  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="msdalp" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
      <h3 class="masthead-title">
<a href="/" title="Home">msdalp</a>
<small>java, android, etc.</small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/about">About</a></small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/archive">Archive</a></small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/atom.xml">Feed</a></small>


</h3>

      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2015/03/01/Tomcat-7-Run-on-Port-80/">
        Run Tomcat7 on Port 80
      </a>
    </h1>

    <time datetime="2015-03-01T20:46:32+01:00" class="post-date">01 Mar 2015</time>

    You may need to run Tomcat on port 80 for many reasons. It is possible to accomplish this in three steps. <br>
First step is move 8080 to port 80.Find your server.xml file for Tomcat. It is probably under /etc/tomcat/server.xml but still 
you can find it by using: <br>
{% highlight bash %}
$ locate server.xml
/etc/tomcat7/server.xml
{% endhighlight %}
Open server.xml file with an avaliable text editor (I will use nano).
{% highlight bash %}
$ sudo nano /etc/tomcat7/server.xml
{% endhighlight %}
Find the part where port is defined as 8080 and change it to 80.
{% highlight xml %}
 <Connector port="80" protocol="HTTP/1.1"
               connectionTimeout="20000"
               URIEncoding="UTF-8"
               redirectPort="8443" />
{% endhighlight %}
Close the file by saving it. If you run tomcat now it will complain about some authentication errors. It happens because we are trying to run 
Tomcat under 1023 ports. So the next step is enable authbind for tomcat. If you run Tomcat on port numbers that are all higher than 1023, then you
 do not need authbind.  It is used for binding Tomcat to lower port numbers. Open /etc/default/tomcat with your text editor.
{% highlight bash %}
$ sudo nano /etc/default/tomcat7
{% endhighlight %}
Switch authbind=no to authbind=yes which is located at the end of file.
{% highlight xml %}
# NOTE: authbind works only with IPv4.  Do not enable it when using IPv6.
# (yes/no, default: no)
AUTHBIND=yes
{% endhighlight %}
The last step is disabling IPv6. You can see the warning just before authbind line saying that "NOTE: authbind works only with IPv4.  Do not enable it when using IPv6.".
Open /etc/sysctl.conf with your text editor.
{% highlight bash %}
$ sudo nano /etc/sysctl.conf
{% endhighlight %}
And add these three lines to end of the file.
{% highlight xml %}
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1
{% endhighlight %}
Save the file and close it. To make sure IPv6 is disabled run 
{% highlight bash %}
sudo sysctl -p
{% endhighlight %}
and you will see 
{% highlight bash %}
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1
{% endhighlight %}
After that, if you run:
{% highlight bash %}
$ cat /proc/sys/net/ipv6/conf/all/disable_ipv6
{% endhighlight %}
It will report: 1 <br>
Now it is ready to run on port 80. Start your tomcat with 
{% highlight bash %}
$ sudo service tomcat7 start
{% endhighlight %}
If you look at your catalina.out logs it will be written in there as 
{% highlight bash %}
Mar 21, 2015 10:02:44 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-80"]
{% endhighlight %}

Now you can access your services directly without any port like <br>
example.com/Services/


 

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2015/01/11/Create-Exe-from-Java-Project-with-Many-Jars-Included/">
        Create Exe from a Java Project with Many Jars Included
      </a>
    </h1>

    <time datetime="2015-01-11T20:46:32+01:00" class="post-date">11 Jan 2015</time>

    With 3  steps you can easily create an exe file from your project that may have many included jar libraries (mine had 14 jars). I used Netbeans 8.0.2, lauch4j 3.16, and Linux Netrunner 14 for this process.

1) Create your xml file with launch4j: It is required on the build level and will be done only one time. Simple details will be enough like min jre level and name etc.Here what I use as xml file for launch4j.It just takes icon file and min jre.
{% highlight xml %}
<?xml version="1.0" encoding="UTF-8"?>
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>gui</headerType>
  <jar>/home/mstf/NetBeansProjects/MyProject/exe/MyAppJarName.jar</jar>
  <outfile>/home/mstf/NetBeansProjects/MyProject/exe/MyProject.exe</outfile>
  <errTitle></errTitle>
  <cmdLine></cmdLine>
  <chdir>.</chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <stayAlive>false</stayAlive>
  <restartOnCrash>false</restartOnCrash>
  <manifest></manifest>
  <icon>/home/mstf/Pictures/S.ico</icon>
  <jre>
    <path></path>
    <bundledJre64Bit>false</bundledJre64Bit>
    <bundledJreAsFallback>false</bundledJreAsFallback>
    <minVersion>1.6.0</minVersion>
    <maxVersion></maxVersion>
    <jdkPreference>preferJre</jdkPreference>
    <runtimeBits>64/32</runtimeBits>
  </jre>
</launch4jConfig>
{% endhighlight %}

Create a folder and name it misc under your project folder (Mine is /home/mstf/NetbeansProjects/MyProject/misc).Your one jar file will be exported to exe folder ( which you donâ€™t have to create since it will be created automatically) and put this temporary xml to misc folder with the name l4j-myapp.xml

2) Add a new build target to your build.xml to run Launch4j automatically.It can found under your project on the Files tab.<br>
![My helpful screenshot](/assets/img/l4j_build_xml.png)<br>
Open build.xml and add these target code before the </project> closing. You need to update your lauch4j folder by using location after the <property name="launch4jexe.dir"  tag. Also you can give any name to your one jar output file but it is not important.Save the build.xml file and close it.


{% highlight xml %}
 <target name="package-for-launch4j" depends="clean,compile,jar">
    <property name="launch4jexe.dir" location="/home/mstf/Downloads/launch4j" />
    <taskdef name="launch4j"
             classname="net.sf.launch4j.ant.Launch4jTask"
             classpath="${launch4jexe.dir}/launch4j.jar
            :${launch4jexe.dir}/lib/xstream.jar" />
    <property name="launch4j.jar.name" value="YourOneJarName"/>
    <property name="launch4j.dir" value="exe"/>
    <property name="launch4j.jar" value="${launch4j.dir}/${launch4j.jar.name}.jar"/>
    <echo message="Packaging ${application.title} into a single JAR at ${launch4j.jar}"/>
    <delete dir="${launch4j.dir}"/>
    <mkdir dir="${launch4j.dir}"/>
    <jar destfile="${launch4j.dir}/temp_final.jar" filesetmanifest="skip">
        <zipgroupfileset dir="dist" includes="*.jar"/>
        <zipgroupfileset dir="dist/lib" includes="*.jar"/>
        <manifest>
        <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
    </jar>
    <zip destfile="${launch4j.jar}">
        <zipfileset src="${launch4j.dir}/temp_final.jar"
            excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
    </zip>
    <delete file="${launch4j.dir}/temp_final.jar"/>
    <launch4j configFile="misc/l4j-myapp.xml" />
</target>
{% endhighlight %} 

3) The last step is creating your exe. Now again using the same Files tab click right on the build.xml and click on Run Target -> Other Targets -> package-for-lauch4j <br><br>
![My helpful screenshot](/assets/img/l4j_build_target.png)<br>

Compile output will be like this  and if there is no error you can get your exe under exe folder.

{% highlight console %}
package-for-launch4j:
Packaging MyProject into a single JAR at exe/MyAppJarName.jar
Deleting directory /home/mstf/NetBeansProjects/MyProject/exe
Created dir: /home/mstf/NetBeansProjects/MyProject/exe
Building jar: /home/mstf/NetBeansProjects/MyProject/exe/temp_final.jar
Building zip: /home/mstf/NetBeansProjects/SentioSync/exe/MyAppJarName.jar
Deleting: /home/mstf/NetBeansProjects/MyProject/exe/temp_final.jar
Compiling resources
Linking
Wrapping
Successfully created /home/mstf/NetBeansProjects/MyProject/exe/MyProject.exe
BUILD SUCCESSFUL (total time: 20 seconds)
{% endhighlight %} 








 

  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page4">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page2">Newer</a>
    
  
</div>


      </main>
      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // Required: on line below, replace text in quotes with your forum shortname
    var disqus_shortname = 'msdalp';
    // var disqus_developer = 1;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      <footer class="footer">
        <small>
          &copy; <time datetime="2018-04-16T19:53:39+02:00">2018</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
