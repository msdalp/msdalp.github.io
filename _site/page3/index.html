<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      msdalp &middot; java, android, etc.
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89611351-1', 'auto');
  ga('send', 'pageview');

</script>
  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="msdalp" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
      <h3 class="masthead-title">
<a href="/" title="Home">msdalp</a>
<small>java, android, etc.</small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/about">About</a></small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/archive">Archive</a></small>

  &nbsp;&nbsp;&nbsp;
  <small><a href="/atom.xml">Feed</a></small>


</h3>

      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2015/03/01/Tomcat-7-Run-on-Port-80/">
        Run Tomcat7 on Port 80
      </a>
    </h1>

    <time datetime="2015-03-01T20:46:32+01:00" class="post-date">01 Mar 2015</time>

    <p>You may need to run Tomcat on port 80 for many reasons. It is possible to accomplish this in three steps. <br />
First step is move 8080 to port 80.Find your server.xml file for Tomcat. It is probably under /etc/tomcat/server.xml but still 
you can find it by using: <br /></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>locate server.xml
/etc/tomcat7/server.xml</code></pre></figure>

<p>Open server.xml file with an avaliable text editor (I will use nano).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/tomcat7/server.xml</code></pre></figure>

<p>Find the part where port is defined as 8080 and change it to 80.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"> <span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">"80"</span> <span class="na">protocol=</span><span class="s">"HTTP/1.1"</span>
               <span class="na">connectionTimeout=</span><span class="s">"20000"</span>
               <span class="na">URIEncoding=</span><span class="s">"UTF-8"</span>
               <span class="na">redirectPort=</span><span class="s">"8443"</span> <span class="nt">/&gt;</span></code></pre></figure>

<p>Close the file by saving it. If you run tomcat now it will complain about some authentication errors. It happens because we are trying to run 
Tomcat under 1023 ports. So the next step is enable authbind for tomcat. If you run Tomcat on port numbers that are all higher than 1023, then you
 do not need authbind.  It is used for binding Tomcat to lower port numbers. Open /etc/default/tomcat with your text editor.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/default/tomcat7</code></pre></figure>

<p>Switch authbind=no to authbind=yes which is located at the end of file.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"># NOTE: authbind works only with IPv4.  Do not enable it when using IPv6.
# (yes/no, default: no)
AUTHBIND=yes</code></pre></figure>

<p>The last step is disabling IPv6. You can see the warning just before authbind line saying that “NOTE: authbind works only with IPv4.  Do not enable it when using IPv6.”.
Open /etc/sysctl.conf with your text editor.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/sysctl.conf</code></pre></figure>

<p>And add these three lines to end of the file.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1</code></pre></figure>

<p>Save the file and close it. To make sure IPv6 is disabled run</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>sysctl <span class="nt">-p</span></code></pre></figure>

<p>and you will see</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">net.ipv6.conf.all.disable_ipv6 <span class="o">=</span> 1
net.ipv6.conf.default.disable_ipv6 <span class="o">=</span> 1
net.ipv6.conf.lo.disable_ipv6 <span class="o">=</span> 1</code></pre></figure>

<p>After that, if you run:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cat</span> /proc/sys/net/ipv6/conf/all/disable_ipv6</code></pre></figure>

<p>It will report: 1 <br />
Now it is ready to run on port 80. Start your tomcat with</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>service tomcat7 start</code></pre></figure>

<p>If you look at your catalina.out logs it will be written in there as</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Mar 21, 2015 10:02:44 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler <span class="o">[</span><span class="s2">"http-bio-80"</span><span class="o">]</span></code></pre></figure>

<p>Now you can access your services directly without any port like <br />
example.com/Services/</p>


  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2015/01/11/Create-Exe-from-Java-Project-with-Many-Jars-Included/">
        Create Exe from a Java Project with Many Jars Included
      </a>
    </h1>

    <time datetime="2015-01-11T20:46:32+01:00" class="post-date">11 Jan 2015</time>

    <p>With 3  steps you can easily create an exe file from your project that may have many included jar libraries (mine had 14 jars). I used Netbeans 8.0.2, lauch4j 3.16, and Linux Netrunner 14 for this process.</p>

<p>1) Create your xml file with launch4j: It is required on the build level and will be done only one time. Simple details will be enough like min jre level and name etc.Here what I use as xml file for launch4j.It just takes icon file and min jre.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;launch4jConfig&gt;</span>
  <span class="nt">&lt;dontWrapJar&gt;</span>false<span class="nt">&lt;/dontWrapJar&gt;</span>
  <span class="nt">&lt;headerType&gt;</span>gui<span class="nt">&lt;/headerType&gt;</span>
  <span class="nt">&lt;jar&gt;</span>/home/mstf/NetBeansProjects/MyProject/exe/MyAppJarName.jar<span class="nt">&lt;/jar&gt;</span>
  <span class="nt">&lt;outfile&gt;</span>/home/mstf/NetBeansProjects/MyProject/exe/MyProject.exe<span class="nt">&lt;/outfile&gt;</span>
  <span class="nt">&lt;errTitle&gt;&lt;/errTitle&gt;</span>
  <span class="nt">&lt;cmdLine&gt;&lt;/cmdLine&gt;</span>
  <span class="nt">&lt;chdir&gt;</span>.<span class="nt">&lt;/chdir&gt;</span>
  <span class="nt">&lt;priority&gt;</span>normal<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;downloadUrl&gt;</span>http://java.com/download<span class="nt">&lt;/downloadUrl&gt;</span>
  <span class="nt">&lt;supportUrl&gt;&lt;/supportUrl&gt;</span>
  <span class="nt">&lt;stayAlive&gt;</span>false<span class="nt">&lt;/stayAlive&gt;</span>
  <span class="nt">&lt;restartOnCrash&gt;</span>false<span class="nt">&lt;/restartOnCrash&gt;</span>
  <span class="nt">&lt;manifest&gt;&lt;/manifest&gt;</span>
  <span class="nt">&lt;icon&gt;</span>/home/mstf/Pictures/S.ico<span class="nt">&lt;/icon&gt;</span>
  <span class="nt">&lt;jre&gt;</span>
    <span class="nt">&lt;path&gt;&lt;/path&gt;</span>
    <span class="nt">&lt;bundledJre64Bit&gt;</span>false<span class="nt">&lt;/bundledJre64Bit&gt;</span>
    <span class="nt">&lt;bundledJreAsFallback&gt;</span>false<span class="nt">&lt;/bundledJreAsFallback&gt;</span>
    <span class="nt">&lt;minVersion&gt;</span>1.6.0<span class="nt">&lt;/minVersion&gt;</span>
    <span class="nt">&lt;maxVersion&gt;&lt;/maxVersion&gt;</span>
    <span class="nt">&lt;jdkPreference&gt;</span>preferJre<span class="nt">&lt;/jdkPreference&gt;</span>
    <span class="nt">&lt;runtimeBits&gt;</span>64/32<span class="nt">&lt;/runtimeBits&gt;</span>
  <span class="nt">&lt;/jre&gt;</span>
<span class="nt">&lt;/launch4jConfig&gt;</span></code></pre></figure>

<p>Create a folder and name it misc under your project folder (Mine is /home/mstf/NetbeansProjects/MyProject/misc).Your one jar file will be exported to exe folder ( which you don’t have to create since it will be created automatically) and put this temporary xml to misc folder with the name l4j-myapp.xml</p>

<p>2) Add a new build target to your build.xml to run Launch4j automatically.It can found under your project on the Files tab.<br />
<img src="/assets/img/l4j_build_xml.png" alt="My helpful screenshot" /><br />
Open build.xml and add these target code before the &lt;/project&gt; closing. You need to update your lauch4j folder by using location after the &lt;property name=”launch4jexe.dir”  tag. Also you can give any name to your one jar output file but it is not important.Save the build.xml file and close it.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"> <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"package-for-launch4j"</span> <span class="na">depends=</span><span class="s">"clean,compile,jar"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"launch4jexe.dir"</span> <span class="na">location=</span><span class="s">"/home/mstf/Downloads/launch4j"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"launch4j"</span>
             <span class="na">classname=</span><span class="s">"net.sf.launch4j.ant.Launch4jTask"</span>
             <span class="na">classpath=</span><span class="s">"${launch4jexe.dir}/launch4j.jar
            :${launch4jexe.dir}/lib/xstream.jar"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"launch4j.jar.name"</span> <span class="na">value=</span><span class="s">"YourOneJarName"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"launch4j.dir"</span> <span class="na">value=</span><span class="s">"exe"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"launch4j.jar"</span> <span class="na">value=</span><span class="s">"${launch4j.dir}/${launch4j.jar.name}.jar"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;echo</span> <span class="na">message=</span><span class="s">"Packaging ${application.title} into a single JAR at ${launch4j.jar}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${launch4j.dir}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${launch4j.dir}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;jar</span> <span class="na">destfile=</span><span class="s">"${launch4j.dir}/temp_final.jar"</span> <span class="na">filesetmanifest=</span><span class="s">"skip"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;zipgroupfileset</span> <span class="na">dir=</span><span class="s">"dist"</span> <span class="na">includes=</span><span class="s">"*.jar"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;zipgroupfileset</span> <span class="na">dir=</span><span class="s">"dist/lib"</span> <span class="na">includes=</span><span class="s">"*.jar"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;manifest&gt;</span>
        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">"Main-Class"</span> <span class="na">value=</span><span class="s">"${main.class}"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/manifest&gt;</span>
    <span class="nt">&lt;/jar&gt;</span>
    <span class="nt">&lt;zip</span> <span class="na">destfile=</span><span class="s">"${launch4j.jar}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;zipfileset</span> <span class="na">src=</span><span class="s">"${launch4j.dir}/temp_final.jar"</span>
            <span class="na">excludes=</span><span class="s">"META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/zip&gt;</span>
    <span class="nt">&lt;delete</span> <span class="na">file=</span><span class="s">"${launch4j.dir}/temp_final.jar"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;launch4j</span> <span class="na">configFile=</span><span class="s">"misc/l4j-myapp.xml"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/target&gt;</span></code></pre></figure>

<p>3) The last step is creating your exe. Now again using the same Files tab click right on the build.xml and click on Run Target -&gt; Other Targets -&gt; package-for-lauch4j <br /><br />
<img src="/assets/img/l4j_build_target.png" alt="My helpful screenshot" /><br /></p>

<p>Compile output will be like this  and if there is no error you can get your exe under exe folder.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">package-for-launch4j:
Packaging MyProject into a single JAR at exe/MyAppJarName.jar
Deleting directory /home/mstf/NetBeansProjects/MyProject/exe
Created dir: /home/mstf/NetBeansProjects/MyProject/exe
Building jar: /home/mstf/NetBeansProjects/MyProject/exe/temp_final.jar
Building zip: /home/mstf/NetBeansProjects/SentioSync/exe/MyAppJarName.jar
Deleting: /home/mstf/NetBeansProjects/MyProject/exe/temp_final.jar
Compiling resources
Linking
Wrapping
Successfully created /home/mstf/NetBeansProjects/MyProject/exe/MyProject.exe
BUILD SUCCESSFUL (total time: 20 seconds)</span></code></pre></figure>


  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page4">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page2">Newer</a>
    
  
</div>


      </main>
      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // Required: on line below, replace text in quotes with your forum shortname
    var disqus_shortname = 'msdalp';
    // var disqus_developer = 1;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      <footer class="footer">
        <small>
          &copy; <time datetime="2018-04-16T19:30:33+02:00">2018</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
